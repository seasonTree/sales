(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["message"],{

/***/ "./client/src/js/message.js":
/*!**********************************!*\
  !*** ./client/src/js/message.js ***!
  \**********************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base */ \"./client/src/js/base.js\");\n/* harmony import */ var _mixin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./mixin */ \"./client/src/js/mixin.js\");\n\n\nnew _base__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n  el: '#app',\n  mixins: [_mixin__WEBPACK_IMPORTED_MODULE_1__[\"mixinExt\"]],\n  created: function created() {\n    var that = this;\n    that.$api.message.lst().then(function (res) {\n      that.tdata = res.data;\n    }).catch(function (res) {\n      that.$comp.toast({\n        text: '获取数据失败，请刷新后重试.',\n        color: 'error'\n      });\n    });\n  },\n  methods: {\n    showMessage: function showMessage(item) {\n      var that = this,\n          citem = JSON.parse(JSON.stringify(item));\n      that.message.id = citem.id;\n      that.message.title = citem.title;\n      that.message.content = citem.content;\n      that.message.show = true;\n      that.$api.message.isRead({\n        data: citem.id\n      }).then(function (res) {\n        if (res.code == 0) {\n          var mcount = that.global.messageCount;\n          that.global.messageCount = mcount-- < 0 ? 0 : mcount--; //标记已读\n\n          item.status = 1;\n        }\n      }).catch(function (res) {});\n    },\n    delMessage: function delMessage(id, index) {\n      var that = this;\n      that.$api.message.delMessage({\n        data: id\n      }).then(function (res) {\n        if (res.code == 0) {\n          that.$comp.toast({\n            text: res.msg\n          });\n          that.tdata.splice(index, 1);\n        } else {\n          that.$comp.toast({\n            text: res.msg || '删除失败，请重试.',\n            color: 'error'\n          });\n        }\n      }).catch(function (res) {\n        that.$comp.toast({\n          text: res.msg || '删除失败，请重试.',\n          color: 'error'\n        });\n      });\n    }\n  },\n  data: function data() {\n    return {\n      message: {\n        show: false,\n        id: '',\n        title: '',\n        content: ''\n      },\n      theader: [// {\n      //     text: 'id',\n      //     align: 'left',\n      //     value: 'id',\n      //     sortable: false,\n      // },\n      {\n        text: '标题',\n        align: 'left',\n        value: 'title',\n        sortable: false\n      }, {\n        text: '发送人',\n        align: 'left',\n        value: 'name',\n        sortable: false\n      }, {\n        text: '发送时间',\n        align: 'left',\n        value: 'create_time',\n        sortable: false\n      }, {\n        text: '',\n        align: 'left',\n        sortable: false\n      }],\n      tdata: [{}]\n    };\n  }\n});\n\n//# sourceURL=webpack:///./client/src/js/message.js?");

/***/ })

},[["./client/src/js/message.js","runtime","vendor","common"]]]);