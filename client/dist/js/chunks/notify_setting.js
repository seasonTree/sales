(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{66:function(t,e,o){"use strict";o.r(e);var a=o(0),i=o(1);new a.a({el:"#app",mixins:[i.b],created:function(){var t=this;t.$api.message.get().then(function(e){0==e.code?t.tdata=e.data:t.$comp.toast({text:"获取失败，请重试.",color:"error"})}).catch(function(e){t.$comp.toast({text:"获取失败，请重试.",color:"error"})})},methods:{addCommit:function(){var t=this;t.$api.message.add(t.addItem).then(function(e){0==e.code?(t.$comp.toast({text:e.msg}),t.hideDialog("add"),t.tdata.unshift(e.data)):t.$comp.toast({text:e.msg||"新增失败，请重试.",color:"error"})}).catch(function(e){t.$comp.toast({text:e.msg||"新增失败，请重试.",color:"error"})})},editCommit:function(){var t=this;t.$api.message.edt(t.addItem).then(function(e){0==e.code?(t.$comp.toast({text:e.msg}),t.hideDialog("edit")):t.$comp.toast({text:e.msg||"修改失败，请重试.",color:"error"})}).catch(function(e){t.$comp.toast({text:e.msg||"修改失败，请重试.",color:"error"})})},del:function(t,e){var o=this;o.$api.message.del({data:t}).then(function(t){0==t.code?(o.$comp.toast({text:t.msg}),o.tdata.splice(e,1)):o.$comp.toast({text:t.msg||"删除失败，请重试.",color:"error"})}).catch(function(t){o.$comp.toast({text:t.msg||"删除失败，请重试.",color:"error"})})},hideDialog:function(t){var e=this;"add"==t?(e.addItem.type=null,e.addItem.content="",e.showAdd=!1):"edit"==t&&(e.editItem.id=null,e.editItem.type=null,e.editItem.content="",e.showEdit=!1)},showEditDialog:function(t){var e=this,o=JSON.parse(JSON.stringify(t));e.editItem.id=o.id,e.editItem.title=o.title,e.editItem.content=o.content,e.showEdit=!0},setUse:function(t,e){var o=this;o.$api.message.setUse({data:t.id}).then(function(a){if(0==a.code)if(o.$comp.toast({text:a.msg}),e)t.status=0;else{t.status=1;for(var i=0;i<o.tdata.length;i++){var d=o.tdata[i];d.id!=t.id&&d.type==t.type&&(d.type=1)}}else o.$comp.toast({text:a.msg||"设置失败，请重试.",color:"error"})}).catch(function(t){o.$comp.toast({text:t.msg||"设置失败，请重试.",color:"error"})})}},data:function(){return{addItem:{type:"",content:""},editItem:{id:null,type:"",content:""},select:[{id:1,text:"佣金变动消息"},{id:2,text:"审核通过消息"},{id:3,text:"审核不通过消息"}],showAdd:!1,showEdit:!1,addValid:!1,editValid:!1,rules:[function(t){return!!t||"消息类型不能为空."}],theader:[{text:"",align:"left",value:"a",sortable:!1},{text:"消息类型",align:"left",value:"b",sortable:!1},{text:"消息内容",align:"left",value:"c",sortable:!1},{align:"center",value:"d",sortable:!1}],tdata:[]}}})}},[[66,0,2,1]]]);