(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["notify_setting"],{

/***/ "./client/src/js/notify_setting.js":
/*!*****************************************!*\
  !*** ./client/src/js/notify_setting.js ***!
  \*****************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base */ \"./client/src/js/base.js\");\n/* harmony import */ var _mixin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./mixin */ \"./client/src/js/mixin.js\");\n\n\nnew _base__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n  el: '#app',\n  mixins: [_mixin__WEBPACK_IMPORTED_MODULE_1__[\"mixinExt\"]],\n  created: function created() {\n    var that = this;\n    that.$api.message.get().then(function (res) {\n      if (res.code == 0) {\n        that.tdata = res.data;\n      } else {\n        that.$comp.toast({\n          text: '获取失败，请重试.',\n          color: 'error'\n        });\n      }\n    }).catch(function (res) {\n      that.$comp.toast({\n        text: '获取失败，请重试.',\n        color: 'error'\n      });\n    });\n  },\n  methods: {\n    addCommit: function addCommit() {\n      var that = this;\n      that.$api.message.add(that.addItem).then(function (res) {\n        if (res.code == 0) {\n          that.$comp.toast({\n            text: res.msg\n          });\n          that.hideDialog('add'); //直接追加一行\n\n          that.tdata.unshift(res.data);\n        } else {\n          that.$comp.toast({\n            text: res.msg || '新增失败，请重试.',\n            color: 'error'\n          });\n        }\n      }).catch(function (res) {\n        that.$comp.toast({\n          text: res.msg || '新增失败，请重试.',\n          color: 'error'\n        });\n      });\n    },\n    editCommit: function editCommit() {\n      var that = this;\n      that.$api.message.edt(that.addItem).then(function (res) {\n        if (res.code == 0) {\n          that.$comp.toast({\n            text: res.msg\n          });\n          that.hideDialog('edit');\n        } else {\n          that.$comp.toast({\n            text: res.msg || '修改失败，请重试.',\n            color: 'error'\n          });\n        }\n      }).catch(function (res) {\n        that.$comp.toast({\n          text: res.msg || '修改失败，请重试.',\n          color: 'error'\n        });\n      });\n    },\n    del: function del(id, index) {\n      var that = this;\n      that.$api.message.del({\n        data: id\n      }).then(function (res) {\n        if (res.code == 0) {\n          that.$comp.toast({\n            text: res.msg\n          });\n          that.tdata.splice(index, 1);\n        } else {\n          that.$comp.toast({\n            text: res.msg || '删除失败，请重试.',\n            color: 'error'\n          });\n        }\n      }).catch(function (res) {\n        that.$comp.toast({\n          text: res.msg || '删除失败，请重试.',\n          color: 'error'\n        });\n      });\n    },\n    //关闭窗口并清除数据\n    hideDialog: function hideDialog(type) {\n      var that = this;\n\n      if (type == 'add') {\n        that.addItem.type = null;\n        that.addItem.content = '';\n        that.showAdd = false;\n      } else if (type == 'edit') {\n        that.editItem.id = null;\n        that.editItem.type = null;\n        that.editItem.content = '';\n        that.showEdit = false;\n      }\n    },\n    //修改\n    showEditDialog: function showEditDialog(item) {\n      var that = this,\n          data = JSON.parse(JSON.stringify(item));\n      that.editItem.id = data.id;\n      that.editItem.title = data.title;\n      that.editItem.content = data.content;\n      that.showEdit = true;\n    },\n    setUse: function setUse(item, flag) {\n      var that = this;\n      that.$api.message.setUse({\n        data: item.id\n      }).then(function (res) {\n        if (res.code == 0) {\n          that.$comp.toast({\n            text: res.msg\n          });\n\n          if (flag) {\n            //设置为true，其他的要设置未flase\n            item.status = 0;\n          } else {\n            //设置未flase\n            item.status = 1;\n\n            for (var i = 0; i < that.tdata.length; i++) {\n              var citem = that.tdata[i];\n\n              if (citem.id != item.id && citem.type == item.type) {\n                citem.type = 1;\n              }\n            }\n          }\n        } else {\n          that.$comp.toast({\n            text: res.msg || '设置失败，请重试.',\n            color: 'error'\n          });\n        }\n      }).catch(function (res) {\n        that.$comp.toast({\n          text: res.msg || '设置失败，请重试.',\n          color: 'error'\n        });\n      });\n    }\n  },\n  data: function data() {\n    return {\n      addItem: {\n        type: '',\n        content: ''\n      },\n      editItem: {\n        id: null,\n        type: '',\n        content: ''\n      },\n      select: [{\n        id: 1,\n        text: '佣金变动消息'\n      }, {\n        id: 2,\n        text: '审核通过消息'\n      }, {\n        id: 3,\n        text: '审核不通过消息'\n      }],\n      showAdd: false,\n      showEdit: false,\n      addValid: false,\n      editValid: false,\n      rules: [function (v) {\n        return !!v || '消息类型不能为空.';\n      }],\n      theader: [{\n        text: '',\n        align: 'left',\n        value: 'a',\n        sortable: false\n      }, {\n        text: '消息类型',\n        align: 'left',\n        value: 'b',\n        sortable: false\n      }, {\n        text: '消息内容',\n        align: 'left',\n        value: 'c',\n        sortable: false\n      }, {\n        align: 'center',\n        value: 'd',\n        sortable: false\n      }],\n      tdata: [{\n        a: '12321312',\n        b: '测试数据',\n        c: 'nnnnnnnnnnnnn',\n        status: 0\n      }, {\n        a: '2222',\n        b: '测试啥打法是否士大夫撒旦',\n        c: '555',\n        status: 1\n      }]\n    };\n  }\n});\n\n//# sourceURL=webpack:///./client/src/js/notify_setting.js?");

/***/ })

},[["./client/src/js/notify_setting.js","runtime","vendor","common"]]]);