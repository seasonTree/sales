(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["forget_password"],{

/***/ "./client/src/js/forget_password.js":
/*!******************************************!*\
  !*** ./client/src/js/forget_password.js ***!
  \******************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base */ \"./client/src/js/base.js\");\n/* harmony import */ var _mixin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./mixin */ \"./client/src/js/mixin.js\");\n\n\nnew _base__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n  el: '#app',\n  mixins: [_mixin__WEBPACK_IMPORTED_MODULE_1__[\"baseMixin\"]],\n  data: function data() {\n    var _this = this;\n\n    return {\n      data: {\n        phone_num: '',\n        identify_code: ''\n      },\n      valid: false,\n      sending: false,\n      phoneRex: /^((13[0-9])|(14[5|7])|(15([0-3]|[5-9]))|(18[0-9])|(17[0-9])|(19[0-9])|16[6])\\d{8}$/,\n      phoneRoules: [function (value) {\n        return !!value || '手机号必填';\n      }, function (value) {\n        return _this.phoneRex.test(value) || '手机号不正确';\n      }],\n      IdentifyingCodeRoules: [function (value) {\n        return !!value || '验证码必填';\n      }],\n      identifyBtnText: '发送验证码',\n      sendInterval: null,\n      smsDisabled: true\n    };\n  },\n  watch: {\n    data: {\n      handler: function handler(newValue, oldValue) {\n        //不是发送，并且检验通过，disable为false，否则true\n        this.smsDisabled = this.sending || !this.phoneRex.test(newValue.phone_num);\n      },\n      deep: true\n    }\n  },\n  methods: {\n    // showMessage(show, text, color) {\n    //     this.message.text = text || '';\n    //     this.message.color = color;\n    //     this.message.show = show;\n    // },\n    sendSMS: function sendSMS() {\n      var _this2 = this;\n\n      var that = this;\n      that.sending = true;\n      that.smsDisabled = true;\n      that.identifyBtnText = 59;\n      that.sendInterval = setInterval(function () {\n        if (that.identifyBtnText == 1) {\n          that.sending = false; //因为直接写watch会出现无法监听sending，所以写到这里\n\n          that.smsDisabled = !that.phoneRex.test(that.data.phone_num);\n          that.identifyBtnText = '发送验证码';\n          clearInterval(that.sendInterval);\n        } else {\n          that.identifyBtnText--;\n        }\n      }, 1000);\n      that.$api.user.sendSMS({\n        data: that.data\n      }).then(function (res) {\n        if (res.code == 0) {\n          _this2.$comp.toast({\n            text: res.msg\n          }); // that.globalShowMessage(true, res.msg, 'success');\n\n        } else {\n          _this2.$comp.toast({\n            text: res.msg,\n            color: 'error'\n          }); // that.globalShowMessage(true, res.msg, 'error');\n\n        }\n      }).catch(function (res) {\n        _this2.$comp.toast({\n          text: '发送失败,请重试.',\n          color: 'error'\n        }); // that.globalShowMessage(true, '发送失败,请重试.', 'error');\n\n      });\n    },\n    submit: function submit() {\n      var _this3 = this;\n\n      var that = this;\n\n      if (that.$refs.form.validate()) {\n        that.$api.user.checkPasswordSMS({\n          data: that.data\n        }).then(function (res) {\n          if (res.code == 0) {\n            _this3.$comp.toast({\n              text: res.msg\n            }); // this.globalShowMessage(true, res.msg, 'success');\n\n\n            setTimeout(function () {\n              window.location.href = res.data.url + '?uid=' + res.data.uid;\n            }, 3000);\n          } else {\n            _this3.$comp.toast({\n              text: res.msg,\n              color: 'error'\n            }); // this.globalShowMessage(true, res.msg, 'error');\n\n          }\n        }).catch(function (res) {\n          _this3.$comp.toast({\n            text: '验证失败,请重试.',\n            color: 'error'\n          }); // this.globalShowMessage(true, '验证失败,请重试.', 'error');\n\n        });\n      }\n    }\n  }\n});\n\n//# sourceURL=webpack:///./client/src/js/forget_password.js?");

/***/ })

},[["./client/src/js/forget_password.js","runtime","vendor","common"]]]);