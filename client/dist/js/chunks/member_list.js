(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{64:function(e,t,a){"use strict";a.r(t);var o=a(0),r=a(1);new o.a({el:"#app",mixins:[r.b],created:function(){var e=this;e.$api.user.getMemberRole().then(function(t){e.rolesAll=t.data}).catch(function(t){e.$comp.toast({text:"获取数据失败，请刷新后重试.",color:"error"})}),e.getReomteData()},data:function(){return{firstLoading:!0,pager:{totalVisible:7,count:1,index:1,size:10},tableType:[{text:"经销商",value:1},{text:"个人经销商",value:3},{text:" 销售员",value:2}],showAdd:!1,showFreeze:!1,addData:{role_id:[]},show_pass:!1,show_pass1:!1,rolesAll:{},currentDataType:2,freezeItem:{id:null,reason:"",orginItem:null},theader:[{text:"ID",align:"left",value:"id",sortable:!1},{text:"UserName",align:"left",value:"username",sortable:!1},{text:"First Name",align:"left",value:"first_name",sortable:!1},{text:"Last Name",align:"left",value:"last_name",sortable:!1},{text:"Phone",align:"left",value:"phone",sortable:!1},{text:"Create Time",align:"left",value:"create_time",sortable:!1},{text:"Status",align:"left",value:"status",sortable:!1},{align:"center",value:"",sortable:!1}],tableLoading:!1,tdata:[]}},watch:{currentDataType:{handler:function(e,t){this.firstLoading||(this.pager.index=1,this.getReomteData())},immediate:!0}},methods:{addCommit:function(){var e=this;e.$api.user.addDls({data:e.addData}).then(function(t){0==t.code?(e.$comp.toast({text:t.msg||"新增成功."}),e.getRemoteData(),e.closeDialog("add")):e.$comp.toast({text:t.msg||"新增失败，请刷新后重试.",color:"error"})}).catch(function(t){e.$comp.toast({text:"新增失败，请刷新后重试.",color:"error"})})},showFreezeDialog:function(e){var t=this;t.freezeItem.id=e.id,t.freezeItem.orginItem=e,t.showFreeze=!0},freeze:function(){var e=this;e.changeStatus(e.freezeItem.orginItem,e.freezeItem.id,3,e.freezeItem.reason)},changeStatus:function(e,t,a,o){var r=this,n={status:a,id:t,reason:3==a?o:""};r.$api.user.userStatus({data:n}).then(function(t){0==t.code?(r.$comp.toast({text:t.msg||"设置成功."}),3==(e.status=a)&&r.closeDialog("freeze")):r.$comp.toast({text:"设置失败，请重试.",color:"error"})}).catch(function(e){r.$comp.toast({text:"设置失败，请重试.",color:"error"})})},changePage:function(){this.getReomteData()},getReomteData:function(){var e=this;e.tableLoading=!0,e.$api.user.getmemberlst({type:e.currentDataType,pageSize:e.pager.size,pageIndex:e.pager.index}).then(function(t){0==t.code?(e.tdata=t.data.data,e.pager.count=t.data.pageCount||1):e.$comp.toast({text:"获取失败，请重试.",color:"error"}),e.firstLoading&&(e.firstLoading=!1),e.tableLoading=!1}).catch(function(t){e.$comp.toast({text:"获取失败，请重试.",color:"error"}),e.tableLoading=!1,e.firstLoading&&(e.firstLoading=!1)})},closeDialog:function(e){var t=this;"add"==e?(t.showAdd=!1,t.$refs.addForm.reset()):"freeze"==e&&(t.showFreeze=!1,t.freezeItem={id:null,reason:"",orginItem:null})}}})}},[[64,0,2,1]]]);