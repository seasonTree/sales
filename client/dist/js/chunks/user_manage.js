(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{76:function(t,e,o){"use strict";o.r(e);var a=o(0),r=o(1);new a.a({el:"#app",mixins:[r.b],created:function(){this.getRemoteData()},data:function(){return{show_pass:!1,show_pass1:!1,rolesAll:{},userAll:{},addData:{role_id:[]},editData:{role_id:[]},showAdd:!1,showEdit:!1,theader:[{text:"ID",align:"left",value:"id",sortable:!1},{text:"登录名",align:"left",value:"username",sortable:!1},{text:"角色",align:"left",value:"role_name",sortable:!1},{text:"是否启用",align:"left",value:"status",sortable:!1},{text:"操作",align:"center",value:"e",sortable:!1}],tdata:[]}},methods:{getRemoteData:function(){var t=this;t.$api.user.get().then(function(e){t.rolesAll=e.data.roles,t.tdata=e.data.list}).catch(function(e){t.$comp.toast({text:"获取数据失败，请刷新重试.",color:"error"})})},addCommit:function(){var t=this;t.$api.user.add({data:t.addData}).then(function(e){0==e.code?(t.$comp.toast({text:e.msg||"新增成功."}),t.getRemoteData(),t.closeDialog("add")):t.$comp.toast({text:e.msg||"新增失败，请刷新后重试.",color:"error"})}).catch(function(e){t.$comp.toast({text:"新增失败，请刷新后重试.",color:"error"})})},changeStatus:function(t,e,o){var a=this,r={status:o,id:e};a.$api.user.userStatus({data:r}).then(function(e){0==e.code?(a.$comp.toast({text:e.msg||"设置成功."}),t.status=o):a.$comp.toast({text:"设置失败，请重试.",color:"error"})}).catch(function(t){a.$comp.toast({text:"设置失败，请重试.",color:"error"})})},del:function(t){var e=this;e.$comp.confirm({title:"提示",text:"确认要删除吗?",ok:function(){e.$api.user.del({data:t}).then(function(o){if(0==o.code){e.$comp.toast({text:o.msg||"删除成功."});for(var a=0;a<e.tdata.length;a++)if(e.tdata[a].id==t){e.tdata.splice(a,1);break}}else e.$comp.toast({text:o.msg||"删除失败，请刷新后重试.",color:"error"})}).catch(function(t){e.$comp.toast({text:"删除失败，请刷新后重试.",color:"error"})})}})},edit:function(t){var e=JSON.parse(JSON.stringify(t));e.role_id=e.role_id?e.role_id.split(",").map(function(t){return parseInt(t,10)}):[],this.editData=e,this.showEdit=!0},editCommit:function(){var t=this;t.$api.user.edit({data:t.editData}).then(function(e){0==e.code?(t.$comp.toast({text:e.msg||"修改成功."}),t.getRemoteData(),t.closeDialog("edit")):t.$comp.toast({text:e.msg||"修改失败，请刷新后重试.",color:"error"})}).catch(function(e){t.$comp.toast({text:"修改失败，请刷新后重试.",color:"error"})})},closeDialog:function(t){var e=this;"add"==t?(e.showAdd=!1,e.$refs.addForm.reset()):"edit"==t&&(e.showEdit=!1,e.$refs.editForm.reset())}}})}},[[76,0,2,1]]]);