(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{75:function(t,e,a){"use strict";a.r(e);var i=a(0),o=a(1),n=a(2);new i.a({el:"#app",mixins:[o.b],created:function(){var t=this,e=Object(n.c)();t.dateFm=e.monthDayStart,t.dateTo=e.monthDayCur,t.setExportUrl(),t.getReomteData()},data:function(){return{firstLoading:!0,pager:{totalVisible:7,count:1,index:1,size:10},tableType:[{text:"Transaction History",value:0},{text:"Registration History",value:1}],currentDataType:0,dateFm:null,dateTo:null,menu:!1,menu1:!1,theader:[],tableLoading:!1,transactionHead:[{text:"Firt Name",align:"left",value:"firstName",sortable:!1},{text:"Phone",align:"left",value:"phone",sortable:!1},{text:"Amount",align:"right",value:"quantity * unitprice ",sortable:!1},{text:"Usage",align:"left",value:"description",sortable:!1},{text:"Date",align:"left",value:"created_at",sortable:!1}],registrationHead:[{text:"Firt Name",align:"left",value:"firstName",sortable:!1},{text:"Phone",align:"left",value:"phone",sortable:!1},{text:"Ref. Code",align:"left",value:"referralCode",sortable:!1},{text:"Date",align:"left",value:"created_at",sortable:!1}],tdata:[],dataTimer:null,exportUrl:""}},watch:{currentDataType:{handler:function(t,e){var a=this;0==t?a.theader=a.transactionHead:1==t&&(a.theader=a.registrationHead),this.firstLoading||(a.setExportUrl(),this.pager.index=1,a.getReomteData())},immediate:!0},dateFm:function(t,e){this.firstLoading||(this.setExportUrl(),this.getReomteData())},dateTo:function(t,e){this.firstLoading||(this.setExportUrl(),this.getReomteData())}},methods:{setExportUrl:function(){this.exportUrl="/transaction/exportExcel?type=".concat(this.currentDataType,"&dateFm=").concat(this.dateFm,"&dateTo=").concat(this.dateTo)},changePage:function(){this.getReomteData()},getReomteData:function(){var t=this;t.tableLoading=!0,t.$api.transaction.get({data:{type:t.currentDataType,dateFm:t.dateFm,dateTo:t.dateTo,pageSize:t.pager.size,pageIndex:t.pager.index}}).then(function(e){0==e.code?(t.tdata=e.data.data,t.pager.count=e.data.pageCount||1):t.$comp.toast({text:"获取失败，请重试.",color:"error"}),t.firstLoading&&(t.firstLoading=!1),t.tableLoading=!1}).catch(function(e){t.$comp.toast({text:"获取失败，请重试.",color:"error"}),t.tableLoading=!1,t.firstLoading&&(t.firstLoading=!1)})}}})}},[[75,0,2,1]]]);