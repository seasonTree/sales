(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(t,e,n){"use strict";var r={};n.r(r),n.d(r,"login",function(){return T}),n.d(r,"logout",function(){return $});var o={};n.r(o),n.d(o,"sendSMS",function(){return P}),n.d(o,"checkPasswordSMS",function(){return U}),n.d(o,"resetPassword",function(){return O}),n.d(o,"get",function(){return F}),n.d(o,"getmemberlst",function(){return M}),n.d(o,"getMemberRole",function(){return R}),n.d(o,"add",function(){return E}),n.d(o,"addDls",function(){return D}),n.d(o,"userStatus",function(){return L}),n.d(o,"getOneUser",function(){return I}),n.d(o,"del",function(){return N}),n.d(o,"edit",function(){return A}),n.d(o,"insUserInfo",function(){return j});var a={};n.r(a),n.d(a,"get",function(){return z}),n.d(a,"edit",function(){return B}),n.d(a,"add",function(){return J}),n.d(a,"del",function(){return V}),n.d(a,"getSelect",function(){return q});var i={};n.r(i),n.d(i,"get",function(){return H}),n.d(i,"add",function(){return K}),n.d(i,"getSales",function(){return Y}),n.d(i,"addSales",function(){return Q}),n.d(i,"changeStatus",function(){return W}),n.d(i,"getChannel",function(){return X}),n.d(i,"updateChannel",function(){return Z});var u={};n.r(u),n.d(u,"get",function(){return G}),n.d(u,"edit",function(){return tt}),n.d(u,"add",function(){return et}),n.d(u,"del",function(){return nt});var s={};n.r(s),n.d(s,"lst",function(){return rt}),n.d(s,"showQrCode",function(){return ot}),n.d(s,"changeStatus",function(){return at});var c={};n.r(c),n.d(c,"lst",function(){return it}),n.d(c,"get",function(){return ut}),n.d(c,"add",function(){return st}),n.d(c,"edit",function(){return ct}),n.d(c,"del",function(){return lt}),n.d(c,"setUse",function(){return dt}),n.d(c,"getMessageCount",function(){return ft}),n.d(c,"isRead",function(){return ht}),n.d(c,"delMessage",function(){return pt});var l={};n.r(l),n.d(l,"addSel",function(){return gt});var d={};n.r(d),n.d(d,"get",function(){return mt}),n.d(d,"exportExcel",function(){return vt}),n.d(d,"add",function(){return bt}),n.d(d,"getOneUser",function(){return _t}),n.d(d,"del",function(){return wt}),n.d(d,"edit",function(){return yt});var f={};n.r(f),n.d(f,"userRegister",function(){return St});var h={};n.r(h),n.d(h,"add",function(){return kt}),n.d(h,"edit",function(){return Ct}),n.d(h,"del",function(){return xt}),n.d(h,"getContent",function(){return Tt}),n.d(h,"get",function(){return $t});var p={};n.r(p),n.d(p,"getRegLst",function(){return Pt}),n.d(p,"auditCommit",function(){return Ut});var g={};n.r(g),n.d(g,"get",function(){return Ot}),n.d(g,"add",function(){return Ft}),n.d(g,"move",function(){return Mt}),n.d(g,"update",function(){return Rt}),n(25),n(26),n(27),n(28),n(29);var m=n(4),v=n.n(m),b=n(22),_=n.n(b),w=n(21),y=n.n(w),S=n(2),k=y.a.create({baseURL:"",timeout:6e3}),C=document.head.querySelector('meta[name="token"]');C&&(k.defaults.headers.common.__token__=C.content),k.interceptors.request.use(function(t){return t.headers.token=Object(S.d)(),t},function(t){return{code:404,msg:t.message}}),k.interceptors.response.use(function(t){var e=t.data;return t.status,e},function(t){return Promise.reject(t)});var x=k;function T(t){return x({url:"/login/login",method:"post",data:t})}function $(t){return x({url:"/user/logout",method:"post",data:t})}function P(t){return x({url:"/user/sendMessage",method:"post",data:t})}function U(t){return x({url:"/user/doCheckCode",method:"post",data:t})}function O(t){return x({url:"/user/doResetPassword",method:"post",data:t})}function F(t){return x({url:"/Auser/lst",method:"get",data:t})}function M(t){return x({url:"/user/getmemberlst",method:"get",params:t})}function R(t){return x({url:"/user/getMemberRole",method:"get",data:t})}function E(t){return x({url:"/Auser/add",method:"post",data:t})}function D(t){return x({url:"/Auser/addDls",method:"post",data:t})}function L(t){return x({url:"/user/userStatus",method:"post",data:t})}function I(t){return x({url:"/user/getOneUser",method:"post",data:t})}function N(t){return x({url:"/Auser/del",method:"post",data:t})}function A(t){return x({url:"/Auser/edit",method:"post",data:t})}function j(t){return x({url:"/user/insUserInfo",method:"post",data:t})}function z(t){return x({url:"/privilege/privilegeList",method:"post",data:t})}function B(t){return x({url:"/privilege/edit",method:"post",data:t})}function J(t){return x({url:"/privilege/add",method:"post",data:t})}function V(t){return x({url:"/privilege/del",method:"post",data:t})}function q(t){return x({url:"/privilege/getSelect",method:"post",data:t})}function H(t){return x({url:"/channel/list",method:"post",data:t})}function K(t){return x({url:"/channel/add",method:"post",data:t})}function Y(t){return x({url:"/channel/getSales",method:"post",data:t})}function Q(t){return x({url:"/channel/addSales",method:"post",data:t})}function W(t){return x({url:"/channel/changeStatus",method:"post",data:t})}function X(t){return x({url:"/channel/getChannel",method:"post",data:t})}function Z(t){return x({url:"/channel/updateChannel",method:"post",data:t})}function G(t){return x({url:"/role/lst",method:"post",data:t})}function tt(t){return x({url:"/role/edit",method:"post",data:t})}function et(t){return x({url:"/role/add",method:"post",data:t})}function nt(t){return x({url:"/role/del",method:"post",data:t})}function rt(t){return x({url:"/team/lst",method:"post",data:t})}function ot(t){return x({url:"/team/showInvitation",method:"get",data:t})}function at(t){return x({url:"/team/changeStatus",method:"post",data:t})}function it(t){return x({url:"/message/lst",method:"post",data:t})}function ut(t){return x({url:"/message/get",method:"post",data:t})}function st(t){return x({url:"/message/add",method:"post",data:t})}function ct(t){return x({url:"/message/edit",method:"post",data:t})}function lt(t){return x({url:"/message/del",method:"post",data:t})}function dt(t){return x({url:"/message/setUse",method:"post",data:t})}function ft(){return x({url:"/message/getMessageCount",method:"get",data:null})}function ht(t){return x({url:"/message/isRead",method:"post",data:t})}function pt(t){return x({url:"/message/delMessage",method:"post",data:t})}function gt(t){return x({url:"/config/addConfig",method:"get"})}function mt(t){return x({url:"/transaction/lst",method:"post",data:t})}function vt(t){return x({url:"/transaction/exportExcel",method:"post",data:t})}function bt(t){return x({url:"/user/add",method:"post",data:t})}function _t(t){return x({url:"/user/getOneUser",method:"get"})}function wt(t){return x({url:"/user/del",method:"post",data:t})}function yt(t){return x({url:"/user/edit",method:"post",data:t})}function St(t){return x({url:"/register/userRegister",method:"post",data:t})}function kt(t){return x({url:"/Config/addProtocol",method:"post",data:t})}function Ct(t){return x({url:"/Config/editProtocol",method:"post",data:t})}function xt(t){return x({url:"/Config/delProtocol",method:"post",data:t})}function Tt(t){return x({url:"/Config/getProtocol",method:"post",data:t})}function $t(t){return x({url:"/Config/protocolLst",method:"get",data:t})}function Pt(t){return x({url:"/audit/regLst",method:"get",params:t})}function Ut(t){return x({url:"/audit/auditCommit",method:"post",data:t})}function Ot(){return x({})}function Ft(t){return x({url:"",method:"post",data:t})}function Mt(){return x({})}function Rt(){return x({})}var Et={common:r,user:o,privilege:a,channel:i,role:u,transaction:d,message:c,team:s,config:l,register:f,protocol:h,audit:p,financial:g},Dt={"zh-cn":n(50),"zh-hk":n(51),"en-us":n(52)},Lt="zh-cn",It=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-snackbar",{attrs:{color:t.color,timeout:t.timeout,top:t.top,left:t.left,right:t.right,bottom:t.bottom},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[t._v("\n    "+t._s(t.text)+"\n    "),n("v-btn",{attrs:{color:"blue",flat:""},on:{click:function(e){t.visible=!1}}},[t._v("\n        关闭\n    ")])],1)};It._withStripped=!0;var Nt={name:"toast",props:{text:{type:String,default:""},color:{type:String,default:"success"},timeout:{type:Number,default:3e3},top:{type:Boolean,default:!0},left:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},closeText:{type:String,default:"关闭"}},data:function(){return{visible:!1}}},At=(n(53),n(5)),jt=Object(At.a)(Nt,It,[],!1,null,"2d08a9f4",null);jt.options.__file="client/src/compontent/toast/toast.vue";var zt=jt.exports,Bt=v.a.extend(zt),Jt=null,Vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{width:"300"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[n("v-card-title",{staticClass:"dialog-head blue-grey lighten-5"},[t._v("\n        "+t._s(t.title)+"\n    ")]),t._v(" "),n("v-card-text",{staticClass:"confirm-dialog-text"},[t._v("\n        "+t._s(t.text)+"\n    ")]),t._v(" "),n("v-card-actions",{staticClass:"dialog-foot blue-grey lighten-5"},[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"s-primary"},on:{click:function(e){t.okHandler()}}},[t._v("\n            "+t._s(t.okBtnTex)+"\n        ")]),t._v(" "),n("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(e){t.cancelHandler()}}},[t._v("\n            "+t._s(t.cancelBtnText)+"\n        ")])],1)],1)};Vt._withStripped=!0;var qt={name:"confirm",props:{title:{type:String,default:"标题"},text:{type:String,default:"确认吗?"},okBtnTex:{type:String,default:"确认"},cancelBtnText:{type:String,default:"取消"},ok:{type:Function,default:null},cancel:{type:Function,default:null},visible:{type:Boolean,default:!1}},methods:{okHandler:function(){this.ok&&this.ok(),this._close()},cancelHandler:function(){this.cancel&&this.cancel(),this._close()}}},Ht=(n(54),Object(At.a)(qt,Vt,[],!1,null,"2ff64c98",null));Ht.options.__file="client/src/compontent/confirm/Confirm.vue";var Kt=Ht.exports,Yt=v.a.extend(Kt),Qt=null,Wt={toast:function(t){t=t||{},Jt||((Jt=new Bt).$mount(),document.body.appendChild(Jt.$el)),Jt.text=t.text||"消息",Jt.color=t.color||"success",Jt.timeout=t.timeout||3e3,Jt.top=t.top||!0,Jt.left=t.left||!1,Jt.right=t.right||!1,Jt.bottom=t.bottom||!1,Jt.closeText=t.closeText||"关闭",Jt.visible=!0},confirm:function(t){t=t||{},Qt||((Qt=new Yt).$mount(),document.body.appendChild(Qt.$el),Qt._close=function(){Qt.visible=!1}),Qt.title=t.title||"标题",Qt.text=t.text||"确认吗？",Qt.okBtnTex=t.okBtnTex||"确认",Qt.cancelBtnText=t.cancelBtnText||"取消",Qt.ok=t.ok||null,Qt.cancel=t.cancel||null,Qt.visible=!0}};v.a.use(function t(e){t.installed||(t.installed=!0,Object.defineProperties(e.prototype,{$api:{get:function(){return Et}}}))}),v.a.use(function t(e){t.installed||(t.installed=!0,Object.defineProperties(e.prototype,{$i18n:{setLocal:function(t){Lt=Dt[t]?t:"zh-cn"},get:function(){return Dt[Lt].default}}}))}),v.a.use(function t(e){t.installed||(t.installed=!0,Object.defineProperties(e.prototype,{$comp:{get:function(){return Wt}}}))}),v.a.config.productionTip=!1,v.a.use(_.a),e.a=v.a},1:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i});var r=n(2),o={data:function(){return{global:{language:"zh_cn",currentView:"",subSelect:{}}}},mounted:function(){this._checkLanguage(),this._checkLocation()},methods:{_checkLanguage:function(){this.global.language=Object(r.b)("_language")||"zh-cn"},_checkLocation:function(){var t=window.location.pathname.replace(/(\.html)$/,""),e=window.location.href.replace(/(\.html|\/index.html|\/index)$/,"");if(this.global.currentView=e.split("/").pop().toLocaleLowerCase(),window._menu){var n=window._menu;for(var r in n){var o=n[r];for(var a in o)o[a]==t&&(this.global.subSelect[r]=r,this.global.subSelect[a]=a)}}}}},a=o,i={extends:o,data:function(){return{global:{messageCount:0,messageTimeout:null,changePassword:{valid:!1,show:!1,passOldVis:!1,passVis:!1,passVis1:!1,password:"",oldPassword:"",rePassword:"",submitLoading:!1}}}},mounted:function(){this._checkMessage()},watch:{"global.changePassword.show":{handler:function(t,e){0==t&&(this.$refs.globalPassRef.reset(),this.global.changePassword.passVis=!1,this.global.changePassword.passVis1=!1,this.global.changePassword.submitLoading=!1)}}},methods:{_checkMessage:function(){var t=this;clearTimeout(t.global.messageTimeout),t.$api.message.getMessageCount().then(function(e){0==e.code&&(t.global.messageCount=e.data.count),t.messageTimeout=setTimeout(function(){t._checkMessage()},6e4)}).catch(function(e){t.global.messageCount=0,t.messageTimeout=setTimeout(function(){t._checkMessage()},6e4)})},globalCommitPassword:function(){var t=this;t.global.changePassword.submitLoading=!0,t.$refs.globalPassRef.validate()&&t.$api.user.resetPassword({data:t.global.changePassword}).then(function(e){0==e.code?(t.$comp.toast({text:e.msg}),t.global.changePassword.show=!1):(t.$comp.toast({text:e.msg,color:"error"}),t.global.changePassword.submitLoading=!1)}).catch(function(e){t.$comp.toast({text:"修改失败,请重试.",color:"error"}),t.global.changePassword.submitLoading=!1})}}}},11:function(t,e){},12:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("dl",{staticClass:"tree-node"},t._l(t.data,function(e,r){return n("dd",{key:r,staticClass:"tree-item"},[e.children.length?[n("v-icon",{class:{active:e._open},on:{click:function(n){t.toggle(r,e)}}},[t._v("chevron_right")])]:t._e(),t._v(" "),n("v-checkbox",{attrs:{label:e[t.valueFiled],indeterminate:e._rail},on:{change:function(n){t.itemCheck(r,e)}},model:{value:e._checked,callback:function(n){t.$set(e,"_checked",n)},expression:"item['_checked']"}}),t._v(" "),n("transition",{attrs:{name:"fade"}},[e.children.length&&e._open?n("s-tree",{staticClass:"sub-tree-node",attrs:{"tree-data":e.children,"id-field":t.idField,"parent-field":t.parentField,"value-filed":t.valueFiled,"root-node":t.rootParent,"parent-node":t.parent,"parent-item":e}}):t._e()],1)],2)}))};r._withStripped=!0;var o=n(2),a={name:"s-tree",mounted:function(){this.createTree()},props:{treeData:{type:Array,default:function(){return[]}},parentField:{type:String,required:!0},idField:{type:String,required:!0},valueFiled:{type:String,required:!0},expend:{type:Boolean,default:!1},rootValue:[String,Number],rootNode:{type:Object},parentNode:{type:Object},parentItem:{type:Object},initSelect:{type:Array,default:function(){return[]}}},data:function(){return{data:[],checkList:{},rootParent:null,parent:null}},watch:{treeData:function(t,e){this.createTree()},initSelect:function(t,e){var n=n||{},r=r||{};this.initSelect.forEach(function(t){n[t]=!0});var o=this;setTimeout(function(){o.updateSelect(o.data,o.rootValue,n,r)},500)}},methods:{updateSelect:function(t,e,n,r){var o=this;t.forEach(function(t){var a=t[o.idField];t.children&&o.updateSelect(t.children,a,n,r),o.setCheckOrRail(a,e,t,n,r)}),this.$forceUpdate()},setCheckOrRail:function(t,e,n,r,o){n._checked=!!r[t],(r[t]||o[t])&&(o[e]?o[e]++:o[e]=1),n._open=n._open||this.expend,o[t]==n.children.length&&(n._checked=!0,r[t]=!0),(!r[t]||r[t]&&o[t]!=n.children.length)&&(
//!!转boolean
n._rail=!!o[t])},createTree:function(){var t=this;if("s-tree"!=this.$parent.$options.name){this.rootParent=this;var e={},n={};this.initSelect.forEach(function(t){e[t]=!0}),this.data=Object(o.a)(JSON.parse(JSON.stringify(this.treeData)),this.parentField,this.idField,this.rootValue,function(r,o){var a=r[t.idField];t.setCheckOrRail(a,o,r,e,n)})}else this.data=this.treeData;this.$on("_update",function(e,n,r){e._rail=!!n,e._checked=r,delete JSON.parse(JSON.stringify(e)).children,t.$forceUpdate(),t.noftifyParent(n)}),this.parent=this},toggle:function(t,e){e._open=!e._open,this.$set(this.data,t,e)},noftifyParent:function(t){if(this.parentNode){var e=0,n=!1;this.treeData.forEach(function(t){t._checked&&e++,n=n||t._checked||t._rail});var r=this.treeData.length==e;n&&!r?t=!0:!n&&r&&(t=!1),this.parentNode.$emit("_update",this.parentItem,t,r)}},setAllChildren:function(t,e,n,r){var o=this;e.forEach(function(e,a){e._checked=n,e._rail=!1,o.$set(t.children,a,e),r.push(e),e.children.length&&o.setAllChildren(e,e.children,n,r)})},itemCheck:function(t,e){var n=[];n.push(e),e.children.length&&this.setAllChildren(e,e.children,e._checked,n),e._rail=!1,this.$forceUpdate(),this.noftifyParent()},genSelectItem:function(t,e){var n=this;t.forEach(function(t){(t._checked||t._rail)&&(e.push(t),t.children.length&&n.genSelectItem(t.children,e),delete t.children,delete t._open,delete t._checked,delete t._rail)})},getSelect:function(){var t=JSON.parse(JSON.stringify(this.data)),e=[];return this.genSelectItem(t,e),e}}},i=(n(74),n(5)),u=Object(i.a)(a,r,[],!1,null,"038bc65a",null);u.options.__file="client/src/compontent/stree/STree.vue",e.a=u.exports},2:function(t,e,n){"use strict";var r=0;function o(t,e,n,r){return t<20?e&n|~e&r:t<40?e^n^r:t<60?e&n|e&r|n&r:e^n^r}function a(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function i(t,e){return t<<e|t>>>32-e}var u=function(t){return function(t){for(var e=r?"0123456789ABCDEF":"0123456789abcdef",n="",o=0;o<4*t.length;o++)n+=e.charAt(t[o>>2]>>8*(3-o%4)+4&15)+e.charAt(t[o>>2]>>8*(3-o%4)&15);return n}(function(t){for(var e=t,n=Array(80),r=1732584193,u=-271733879,s=-1732584194,c=271733878,l=-1009589776,d=0;d<e.length;d+=16){for(var f=r,h=u,p=s,g=c,m=l,v=0;v<80;v++){n[v]=v<16?e[d+v]:i(n[v-3]^n[v-8]^n[v-14]^n[v-16],1);var b=a(a(i(r,5),o(v,u,s,c)),a(a(l,n[v]),(_=v)<20?1518500249:_<40?1859775393:_<60?-1894007588:-899497514));l=c,c=s,s=i(u,30),u=r,r=b}r=a(r,f),u=a(u,h),s=a(s,p),c=a(c,g),l=a(l,m)}var _;return new Array(r,u,s,c,l)}(function(t){for(var e=1+(t.length+8>>6),n=new Array(16*e),r=0;r<16*e;r++)n[r]=0;for(r=0;r<t.length;r++)n[r>>2]|=t.charCodeAt(r)<<24-8*(3&r);return n[r>>2]|=128<<24-8*(3&r),n[16*e-1]=8*t.length,n}(t)))};n.d(e,"f",function(){return s}),n.d(e,"a",function(){return c}),n.d(e,"b",function(){return l}),n.d(e,"c",function(){return d}),n.d(e,"e",function(){return f}),n.d(e,"d",function(){return h});var s=function(t){for(var e="",n=1;n<=32;n++)e+=Math.floor(16*Math.random()).toString(16),!t||8!=n&&12!=n&&16!=n&&20!=n||(e+="-");return e.toLocaleLowerCase()},c=function t(e,n,r,o,a){var i=e,u=[];return i.forEach(function(e){e[n]==o&&(e.children=t(i,n,r,e[r],a),u.push(e),a&&a(e,o))}),u},l=function(t){var e,n=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return(e=document.cookie.match(n))?unescape(e[2]):null},d=function(){var t=new Date,e=t.getFullYear(),n=t.getMonth()+1;return{monthDayStart:e+"-"+n+"-01",monthDayCur:e+"-"+n+"-"+t.getDate()}},f=function(t){for(var e=new Array,n=document.location.search.substr(1).split("&"),r=0;r<n.length;r++){var o=n[r].split("=");e[o[0]]=o[1]}var a=null;return e[t]&&(a=decodeURIComponent(e[t])),a},h=function(){var t=function(t,e){if(isNaN(t)||isNaN(Date.parse(t)))return t;var n={"M+":t.getUTCMonth()+1,"d+":t.getUTCDate(),"h+":t.getUTCHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getUTCMonth()+3)/3),S:t.getMilliseconds()};for(var r in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getUTCFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return e}(new Date,"yyyyMMddhh"),e=atob("R2J3UzhKRnhKZlczdWo4NlM=");return u(t+e)}},25:function(t,e){},28:function(t,e){},29:function(t,e){},50:function(t,e,n){"use strict";n.r(e),e.default={getDataError:"获取数据失败，请刷新后重试."}},51:function(t,e,n){"use strict";n.r(e),e.default={getDataError:"獲取數據失敗，請刷新後重試."}},52:function(t,e,n){"use strict";n.r(e),e.default={}},53:function(t,e,n){"use strict";var r=n(7);n.n(r).a},54:function(t,e,n){"use strict";var r=n(8);n.n(r).a},59:function(t,e,n){"use strict";var r=n(9);n.n(r).a},6:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"upload-container",class:{"drop-hover":t.dragInContainer},on:{dragenter:function(e){return e.preventDefault(),e.stopPropagation(),t.dropEnter(e)},dragover:function(e){return e.preventDefault(),e.stopPropagation(),t.dragOver(e)},dragleave:function(e){return e.preventDefault(),e.stopPropagation(),t.dropLeave(e)},drop:function(e){e.preventDefault(),e.stopPropagation(),t.drop(e)}}},[n("label",{staticClass:"upload",style:t.style,attrs:{for:t.id}}),t._v(" "),n("input",{attrs:{hidden:"",id:t.id,type:"file",capture:"video",accept:t.accept},on:{change:function(e){t.handleUpload(e)}}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.contentShow,expression:"contentShow"}],staticClass:"image-content"},[n("div",[n("v-icon",{attrs:{"x-large":""}},[t._v("image")])],1),t._v(" "),n("div",[t._v("\n            "+t._s(t.content)+"\n        ")])]),t._v(" "),t.progress.show?n("div",{staticClass:"mask"},[n("v-progress-circular",{staticClass:"s-up-progress",attrs:{indeterminate:t.progress.indeterminate,rotate:-90,size:"30",width:5,value:t.progress.value,color:"info"}})],1):t._e()])};r._withStripped=!0;var o=n(2),a={name:"upload-image",props:{url:{type:String,default:""},errorTip:{type:String,default:"上传失败, 请重试。"},content:{type:String,default:"上传图片"},beforeUpload:{type:Function,default:null},afterUpload:{type:Function,default:null},accept:{type:String,default:"image/jpe,image/jpeg,image/png"},notSendTip:{type:String,default:"不能上传不允许的图片类型"},imageUrl:{type:String,default:""},dataField:{type:String,default:""},uploadSize:{type:Number,default:0},overUploadSizeText:{type:String,default:"超过上传限制的大小."}},mounted:function(){this.dataField&&(this.imageFiled=this.dataField.split("."))},data:function(){return{id:Object(o.f)(!1).substr(0,6),files:[],style:{backgroundImage:"",opacity:0},progress:{show:!1,value:0,indeterminate:!1},contentShow:!1,imageFiled:[],dragInContainer:!1}},watch:{"progress.show":{handler:function(t,e){var n=this;setTimeout(function(){n.contentShow=!t},300)},immediate:!0},imageUrl:{handler:function(t,e){var n=this;if(t){n.progress.show=!0,n.progress.indeterminate=!0;var r=new Image;r.onload=r.onerror=function(){n.progress.show=!1,n.progress.indeterminate=!1,n.style.backgroundImage="url("+t+")",n.style.opacity=1},r.src=t}else n.style.backgroundImage="",n.style.opacity=1},immediate:!0}},methods:{dropEnter:function(){this.dragInContainer=!0},dragOver:function(){},dropLeave:function(){this.dragInContainer=!1},drop:function(t){if(!this.progress.show){this.dragInContainer=!1;var e=t.dataTransfer.files[0];this.handleUpload(t,e)}},handleUpload:function(t,e){var n=this,r=e||t.target.files[0],o=r.type,a=this.accept.split(","),i=!1;if(0!=n.uploadSize&&r.size>=n.uploadSize)n.$comp.toast({text:n.overUploadSizeText,color:"error"});else{for(var u=0;u<a.length;u++){var s=a[u];if(new RegExp(s).test(o)){i=!0;break}}if(i){if(!1!==(n.beforeUpload&&n.beforeUpload(r))&&n.url){var c=new FileReader;c.readAsDataURL(r),c.onload=function(t){n.style.backgroundImage="url("+t.target.result+")"};var l=new FormData,d=new XMLHttpRequest;l.append("image",r),d.open("post",n.url,!0),d.onload=function(t){n.progress.show=!1,200!=t.target.status&&n.$comp.toast({text:n.errorTip,color:"error"});var e=JSON.parse(t.target.responseText);if(n.imageFiled.length){for(var r=e,o=0;o<n.imageFiled.length;o++)r=r[n.imageFiled[o]];r&&(n.style.backgroundImage="url("+r+")")}n.afterUpload&&n.afterUpload(e)},d.onloadend=function(t){},d.onerror=function(t){n.$comp.toast({text:n.errorTip,color:"error"}),n.style.backgroundImage="",n.progress.show=!1},d.upload.onprogress=function(e){n.progress.value=Math.round(t.loaded/t.total*100)},d.upload.onloadstart=function(){n.progress.show=!0},d.send(l)}}else n.$comp.toast({text:n.notSendTip,color:"error"})}}}},i=(n(59),n(5)),u=Object(i.a)(a,r,[],!1,null,"f622d328",null);u.options.__file="client/src/compontent/uploadimage/UploadImage.vue",e.a=u.exports},7:function(t,e){},74:function(t,e,n){"use strict";var r=n(11);n.n(r).a},8:function(t,e){},9:function(t,e){}}]);