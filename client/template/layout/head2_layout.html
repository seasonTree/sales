{extend name='layout:layout'/}

{block name="_css"}

{/block}

{block name="_head"}
<div class="header">
    <v-toolbar>
        <v-toolbar-side-icon class="toolbar-icon"></v-toolbar-side-icon>
        <v-toolbar-title>
            <v-img class="toolbar-img" src="__basePath__/image/kooa_logo.png" contain></v-img>
        </v-toolbar-title>
        <v-spacer></v-spacer>

        <v-toolbar-items class="hidden-sm-and-down">
            <!-- <v-btn href="{:url('User/personInfo')}" flat>用户中心</v-btn> -->

            <v-btn href="{:url('Team/index')}" flat :class="{'toolbar-active': global.currentView == 'team'}">团队</v-btn>
            <v-btn href="{:url('Channel/index')}" flat :class="{'toolbar-active': global.currentView == 'channel'}">渠道</v-btn>
            <v-btn href="{:url('Achievement/index')}" flat :class="{'toolbar-active': global.currentView == 'achievement'}">业绩</v-btn>
            <v-btn href="{:url('Achievement/index')}" flat :class="{'toolbar-active': global.currentView == 'achievement'}">交易报告</v-btn>
            <v-btn href="{:url('Achievement/distributionNetwork')}" flat :class="{'toolbar-active': global.currentView == 'distributionnetwork'}">销售网络</v-btn>

            <v-btn href="{:url('Message/index')}" flat :class="{'toolbar-active': global.currentView == 'message'}">
                消息
                <v-badge right class="toolbar-message-tip" v-if="global.messageCount > 0">
                    <span slot="badge">{{global.messageCount}}</span>
                </v-badge>
            </v-btn>

        </v-toolbar-items>

        <v-toolbar-items>
            <v-menu offset-y>
                <v-btn flat primary slot="activator">语言</v-btn>
                <v-list dense class="language-dropdown">

                    <v-list-tile :class="{'sub-item-select': global.language == 'zh-cn' }" @click="">
                        <v-list-tile-title>简体中文</v-list-tile-title>
                    </v-list-tile>

                    <v-list-tile :class="{'sub-item-select': global.language == 'zh-hk' }" @click="">
                        <v-list-tile-title>
                            繁体中文
                        </v-list-tile-title>
                    </v-list-tile>

                    <v-list-tile :class="{'sub-item-select': global.language == 'en-us' }" @click="">
                        <v-list-tile-title>English</v-list-tile-title>
                    </v-list-tile>
                </v-list>
            </v-menu>
        </v-toolbar-items>

        <v-toolbar-items class="hidden-sm-and-down">
            <v-menu offset-y>
                <v-btn flat primary slot="activator" :class="{'toolbar-active': global.viewSelect.system }">系统信息</v-btn>
                <v-list dense class="toolbar-dropdown">
                    <div>
                        <v-menu offset-x left open-on-hover>
                            <v-list-tile slot="activator" @click="" :class="{'sub-item-select': global.viewSelect.user}">
                                <v-list-tile-action>
                                    <v-icon>chevron_left</v-icon>
                                </v-list-tile-action>

                                <v-list-tile-title>
                                    用户管理
                                </v-list-tile-title>

                            </v-list-tile>
                            <v-list dense class="toolbar-subdropdown">
                                <v-list-tile href="{:url('Privilege/index')}" :class="{'sub-item-select': global.currentView == 'privilege'}">
                                    <v-list-tile-title>
                                        权限
                                    </v-list-tile-title>
                                </v-list-tile>
                                <v-list-tile href="{:url('Role/index')}" :class="{'sub-item-select': global.currentView == 'role'}">
                                    <v-list-tile-title>
                                        角色
                                    </v-list-tile-title>
                                </v-list-tile>
                                <v-list-tile href="{:url('User/index')}" :class="{'sub-item-select': global.currentView == 'user'}">
                                    <v-list-tile-title>
                                        用户
                                    </v-list-tile-title>
                                </v-list-tile>
                            </v-list>
                        </v-menu>
                    </div>

                    <div>
                        <v-menu offset-x left open-on-hover>
                            <v-list-tile slot="activator" @click="" :class="{'sub-item-select': global.viewSelect.commision}">
                                <v-list-tile-action>
                                    <v-icon>chevron_left</v-icon>
                                </v-list-tile-action>

                                <v-list-tile-title>
                                    佣金管理
                                </v-list-tile-title>
                            </v-list-tile>
                            <v-list dense class="toolbar-subdropdown">
                                <v-list-tile href="{:url('Commision/index')}" :class="{'sub-item-select': global.currentView == 'commision'}">
                                    <v-list-tile-title>
                                        佣金设置
                                    </v-list-tile-title>
                                </v-list-tile>
                            </v-list>
                        </v-menu>
                    </div>

                    <div>
                        <v-menu offset-x left open-on-hover>
                            <v-list-tile slot="activator" @click="">
                                <v-list-tile-action>
                                    <v-icon>chevron_left</v-icon>
                                </v-list-tile-action>

                                <v-list-tile-title>
                                    财务管理
                                </v-list-tile-title>
                            </v-list-tile>
                            <v-list dense class="toolbar-subdropdown">
                                <v-list-tile @click="">
                                    <v-list-tile-title>
                                        财务资料
                                    </v-list-tile-title>
                                </v-list-tile>
                                <v-list-tile @click="">
                                    <v-list-tile-title>
                                        财务报表
                                    </v-list-tile-title>
                                </v-list-tile>
                            </v-list>
                        </v-menu>
                    </div>

                    <div>
                        <v-menu offset-x left open-on-hover>
                            <v-list-tile slot="activator" @click="">
                                <v-list-tile-action>
                                    <v-icon>chevron_left</v-icon>
                                </v-list-tile-action>

                                <v-list-tile-title>
                                    报表管理
                                </v-list-tile-title>
                            </v-list-tile>
                            <v-list dense class="toolbar-subdropdown">
                                <v-list-tile @click="">
                                    <v-list-tile-title>
                                        经销商报表
                                    </v-list-tile-title>
                                </v-list-tile>
                                <v-list-tile @click="">
                                    <v-list-tile-title>
                                        内部销售员报表
                                    </v-list-tile-title>
                                </v-list-tile>
                            </v-list>
                        </v-menu>
                    </div>

                    <div>
                        <v-menu offset-x left open-on-hover>
                            <v-list-tile slot="activator" @click="" :class="{'sub-item-select': global.viewSelect.setting}">
                                <v-list-tile-action>
                                    <v-icon>chevron_left</v-icon>
                                </v-list-tile-action>

                                <v-list-tile-title>
                                    参数设置
                                </v-list-tile-title>
                            </v-list-tile>
                            <v-list dense class="toolbar-subdropdown">

                                <v-list-tile href="{:url('Config/notifySetting')}" :class="{'sub-item-select': global.currentView == 'notifysetting'}">
                                    <v-list-tile-title>
                                        消息设置
                                    </v-list-tile-title>
                                </v-list-tile>

                                <v-list-tile href="{:url('Config/protocolSetting')}" :class="{'sub-item-select': global.currentView == 'protocolsetting'}">
                                    <v-list-tile-title>
                                        协议设置
                                    </v-list-tile-title>
                                </v-list-tile>

                                <v-list-tile @click="">
                                    <v-list-tile-title>
                                        医生脱离设置
                                    </v-list-tile-title>
                                </v-list-tile>

                                <v-list-tile @click="">
                                    <v-list-tile-title>
                                        审批流程设置
                                    </v-list-tile-title>
                                </v-list-tile>
                            </v-list>
                        </v-menu>
                    </div>

                    <div>
                        <v-menu offset-x left open-on-hover>
                            <v-list-tile slot="activator" @click="" :class="{'sub-item-select': global.viewSelect.audit}">
                                <v-list-tile-action>
                                    <v-icon>chevron_left</v-icon>
                                </v-list-tile-action>

                                <v-list-tile-title>
                                    审核管理
                                </v-list-tile-title>
                            </v-list-tile>
                            <v-list dense class="toolbar-subdropdown">
                                <v-list-tile href="{:url('Audit/regAudit')}" :class="{'sub-item-select': global.currentView == 'regaudit'}">
                                    <v-list-tile-title>
                                        注册审核
                                    </v-list-tile-title>
                                </v-list-tile>

                                <v-list-tile @click="">
                                    <v-list-tile-title>
                                        医生脱离审核
                                    </v-list-tile-title>
                                </v-list-tile>
                            </v-list>
                        </v-menu>
                    </div>
                </v-list>
            </v-menu>

            <v-menu offset-y>
                <v-btn flat primary slot="activator" :class="{'toolbar-active': global.currentView == 'userinfo'}">用户中心</v-btn>
                <v-list dense class="language-dropdown">
                    <v-list-tile href="{:url('user/userInfo')}" :class="{'sub-item-select': global.currentView == 'userinfo'}">
                        <v-list-tile-title>
                            个人资料
                        </v-list-tile-title>
                    </v-list-tile>

                    <v-list-tile @click="global.changePassword.show = true">
                        <v-list-tile-title>修改密码</v-list-tile-title>
                    </v-list-tile>

                    <v-list-tile href="{:url('Login/loginOut')}">
                        <v-list-tile-title>登出</v-list-tile-title>
                    </v-list-tile>
                </v-list>
            </v-menu>
            <!-- <v-btn href="{:url('Login/loginOut')}" flat>登出</v-btn> -->
        </v-toolbar-items>
    </v-toolbar>
</div>

<v-dialog scrollable persistent v-model="global.changePassword.show" width="500">
    <v-card>
        <v-card-title class="headline grey lighten-2" primary-title>
            修改密码
        </v-card-title>

        <v-card-text>
            <v-form ref="globalPassRef" vaild="global.changePassword.valid">
                <v-text-field label="密码" :append-icon="global.changePassword.passVis ? 'visibility_off' : 'visibility'"
                    v-model.trim="global.changePassword.password" :type="global.changePassword.passVis ? 'text' : 'password'"
                    :rules="[v => !!v || '密码是必填']" @click:append="global.changePassword.passVis = !global.changePassword.passVis"></v-text-field>

                <v-text-field label="再次输入密码" :append-icon="global.changePassword.passVis1 ? 'visibility_off' : 'visibility'"
                    v-model.trim="global.changePassword.rePassword" :type="global.changePassword.passVis1 ? 'text' : 'password'"
                    :rules="[
                             v => !!v || '确认密码是必填',
                             v => global.changePassword.password == v || '两次输入的密码不一致'
                            ]"
                    @click:append="global.changePassword.passVis1 = !global.changePassword.passVis1"></v-text-field>
            </v-form>
        </v-card-text>

        <v-card-actions>
            <v-spacer></v-spacer>
            <v-btn color="s-primary" @click="globalCommitPassword" :loading="global.changePassword.submitLoading" :disabled="global.changePassword.submitLoading">
                确认
            </v-btn>
            <v-btn color="primary" flat @click="global.changePassword.show = false">
                取消
            </v-btn>
        </v-card-actions>
    </v-card>
</v-dialog>

{/block}

{block name="_script"}
<script src="__basePath__/js/chunks/base.js?date=__date__"></script>
{/block}